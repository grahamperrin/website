TITLE=NomadBSD 130R-20210508 Errata
ID=Errata
CONTENT_START
<p>
<h2>NomadBSD 130R-20210508 Errata</h2>

<h3>Package upgrade breaks autostart of applications</h3>
<p>
<h4>Description</h4>
DSBAutostart creates desktop files for autostarting programs. The desktop
files are read and executed by a script which is part of Openbox. This script
uses the Python module @PORT@(devel/py-xdg). Due to the Python upgrade the
package name changed from py37-xdg to py38-xdg.

<h4>Solution</h4>
Install py38-xdg:

<pre class="code">
# pkg install py38-xdg
</pre>
</p>

<h3>Python upgrade breaks dsbxinput and nomadbsd-chusr</h3>
<p>
<h4>Description</h4>
Due to the upgrade of Python, the Qt5 python module packages changed from
py37-qt5-* to py38-qt5-*. This breaks dsbxinput and nomadbsd-chusr.

<h4>Solution</h4>
Change the shebang of dsbxinput and nomadbsd-chusr:

<pre class="code">
# sed -i '' 's/python3.7/python3.8/' /usr/local/bin/dsbxinput
# sed -i '' 's/python3.7/python3.8/' /usr/bin/nomadbsd-chusr
</pre>
</p>

<h3>HDD/SSD installed NomadBSD doesn't start the GUI on systems which require
nvidia-driver &gt; 390</h3>
<p>
<h4>Description</h4>
Due to the version upgrade from 440 to 460 of @PORT@(x11/nvidia-driver),
the NomadBSD installer fails to install nvidia-driver-440.
<h4>Solution</h4>
Install @PORT@(x11/nvidia-driver) and make the modules load via
<span class="mono">/etc/rc.conf</span>:
<pre class="code">
# pkg install x11/nvidia-driver
# sysrc kld_list+=" /boot/modules/nvidia-modeset.ko /boot/modules/nvidia.ko"
# sysrc initgfx_enable=NO
</pre>
If the file <span class="mono">
/usr/local/etc/X11/xorg.conf.d/00-video-initgfx.conf</span> does not
exist, or doesn't contain the line <span class="mono">Driver "nvidia"</span>,
create the file with the following content:
<pre class="code">
Section "Device"
    Identifier    "NVIDIA CARD"
    VendorName    "NVIDIA Corporation"
    Driver        "nvidia"
EndSection
</pre>

After a reboot the GUI should start.
</p>
CONTENT_END

